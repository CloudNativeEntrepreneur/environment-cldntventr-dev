{{- if and (hasKey .Requirements "repository") (eq .Requirements.repository "bucketrepo") }}
enabled: true
{{- else }}
enabled: false
{{- end }}

config:
  storage:
{{- if .Requirements.storage.repository.url }}
    enabled: true
{{- end }}
    bucketUrl: "{{ .Requirements.storage.repository.url }}"
  auth:
    username: "{{ .Parameters.adminUser.username }}"
    password: "{{ .Parameters.adminUser.password }}"
  cache:
    dir: ./

env:
  TEMP_FIX: until gcr.io/jenkinsxio/bucketrepo:0.1.39 is available in version stream